(ns blog.route
  (:require
    [clojure.string :as str]))

(defc route (.-hash (.-location js/window)))

(route-cell route #(reset! route %))

(defn get-blog-permalink [hash]
  (let [[_ mp permalink] (str/split hash #"/" 3)]
    (when (= "blog" mp)
      permalink)))

(defn get-main-hash [hash]
  (let [[_ mp _] (str/split hash #"/" 3)]
    mp))

(defc= main-hash
  (or (get-main-hash route) "blog"))

(defc= permalink
  (get-blog-permalink route))
