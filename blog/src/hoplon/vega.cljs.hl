(ns hoplon.vega
  (:require
    [cljsjs.vega]))

(defn chart [spec]
  (let [id (gensym "vega-viz")]
    (with-let [c (div :id id)]
      (with-init!
        (.spec (.-parse js/vg)
          spec
          (fn [chart]
            (.update (chart (clj->js {:el (str "#" id)})))))))))
